<%
  @title = "PSP-layout Demo: Rack & Rail system"
  @page_css = ["/css/components/demo.css"]
  @body_class = "debug"
%>

<nav class="nav-menu py-4 mb-8">
  <div class="container mx-auto">
    <div class="flex gap-8 items-center">
      <a href="/" class="nav-link flex items-center gap-2">
        <span class="material-icons text-lg">home</span>
        Home
      </a>
      <a href="/demo" class="nav-link current flex items-center gap-2">
        <span class="material-icons text-lg">grid_view</span>
        Grid Demo
      </a>
      <a href="/api/grid-info" class="nav-link flex items-center gap-2">
        <span class="material-icons text-lg">api</span>
        API Info
      </a>
      <a href="https://github.com/tailwindlabs/tailwindcss" class="nav-link flex items-center gap-2" target="_blank">
        <span class="material-icons text-lg">description</span>
        Tailwind Docs
      </a>
    </div>
  </div>
</nav>



<div class="page-wrapper">
  <h1>Modern Rack & Rail Grid System</h1>
  <p>A CSS Grid/Flexbox-based responsive grid system with two container types:</p>
  <ul>
    <li><strong>Rack</strong>: CSS Grid container with 12-column system and mobile-first responsive behavior</li>
    <li><strong>Rail</strong>: Flexbox container with fixed-width columns and horizontal scrolling</li>
  </ul>
  
  <div>
    <h2>Key Features</h2>
    <ul>
      <li>✅ <strong>Tailwind v4 CSS-First</strong>: Uses modern <code>@theme</code> and <code>@utility</code> syntax</li>
      <li>✅ <strong>Mobile-First</strong>: col-1/2 = 50%, col-3+ = 100% on sm</li>
      <li>✅ <strong>Perfect Centering</strong>: <code>offset-*</code> utilities for precise positioning</li>
      <li>✅ <strong>Modern CSS</strong>: CSS Grid for rack, Flexbox for rail, CSS Custom Properties</li>
    </ul>
  </div>
</div>

<section>
  <div class="page-wrapper">
    <h2>Interactive Column Width Demo</h2>
    <p>Toggle between Rack (CSS Grid) and Rail (Flexbox) containers to see how columns behave differently.</p>
    

      <span style="font-weight: 600; margin-bottom: 1rem; display: block;">Container Type:</span>
      <input type="radio" name="container-type" id="rack-toggle" checked>
      <input type="radio" name="container-type" id="rail-toggle">
      <div class="toggle-switch">
        <label for="rack-toggle" class="rack-label">Rack Container (CSS Grid)</label>
        <label for="rail-toggle" class="rail-label">Rail Container (Flexbox)</label>
      </div>
   
  </div>

  <div id="demo-container" class="rack">
    <% (1..12).each do |i| %>
      <div class="col-<%= i %>">
        <strong>col-<%= i %></strong>
        <div class="measurement-info" id="col-<%= i %>-info">Loading...</div>
      </div>
    <% end %>
  </div>

  <div class="page-wrapper">
    <div id="rack-code-block" class="code-block">
      <h4>Rack Container (CSS Grid)</h4>
      <pre>&lt;div class="rack"&gt;
  &lt;div class="col-1"&gt;col-1&lt;/div&gt;
  &lt;div class="col-2"&gt;col-2&lt;/div&gt;
  &lt;div class="col-3"&gt;col-3&lt;/div&gt;
  &lt;div class="col-6"&gt;col-6&lt;/div&gt;
  &lt;div class="col-12"&gt;col-12&lt;/div&gt;
&lt;/div&gt;</pre>
      <p><strong>Behavior:</strong> Responsive columns that adapt to viewport size. CSS Grid automatically handles wrapping.</p>
    </div>

    <div id="rail-code-block" class="code-block" style="display: none;">
      <h4>Rail Container (Flexbox)</h4>
      <pre>&lt;div class="rail"&gt;
  &lt;div class="col-1"&gt;col-1&lt;/div&gt;
  &lt;div class="col-2"&gt;col-2&lt;/div&gt;
  &lt;div class="col-3"&gt;col-3&lt;/div&gt;
  &lt;div class="col-6"&gt;col-6&lt;/div&gt;
  &lt;div class="col-12"&gt;col-12&lt;/div&gt;
&lt;/div&gt;</pre>
      <p><strong>Behavior:</strong> Fixed-width columns that create horizontal scroll. Perfect for image galleries and card carousels.</p>
    </div>
  </div>

</section>

<section>
  <div class="page-wrapper">
    <h2>Responsive Behavior</h2>
    <p>The rack system automatically adapts to different viewports:</p>
    <ul>
      <li><strong>sm (< 768px):</strong> col-1 & col-2 = 50% width, col-3+ = 100% width</li>
      <li><strong>md (768px+):</strong> 7-column system - col-1 through col-6 proportional, col-7+ = 100% width</li>
      <li><strong>lg+ (≥ 1024px):</strong> Standard 12-column grid system</li>
    </ul>
  </div>

  <div class="rack">
    <div class="col-2">
      <strong>col-2</strong>
      <div class="measurement-info" id="responsive-col-2-info-1">Loading...</div>
    </div>
    <div class="col-8">
      <strong>col-8</strong>
      <div class="measurement-info" id="responsive-col-8-info-1">Loading...</div>
    </div>
    <div class="col-2">
      <strong>col-2</strong>
      <div class="measurement-info" id="responsive-col-2-info-2">Loading...</div>
    </div>
    <div class="col-12">
      <strong>col-12</strong>
      <div class="measurement-info" id="responsive-col-12-info-1">Loading...</div>
    </div>
    <div class="col-6">
      <strong>col-6</strong>
      <div class="measurement-info" id="responsive-col-6-info-1">Loading...</div>
    </div>
    <div class="col-6">
      <strong>col-6</strong>
      <div class="measurement-info" id="responsive-col-6-info-2">Loading...</div>
    </div>
    <div class="col-4">
      <strong>col-4</strong>
      <div class="measurement-info" id="responsive-col-4-info-1">Loading...</div>
    </div>
    <div class="col-4">
      <strong>col-4</strong>
      <div class="measurement-info" id="responsive-col-4-info-2">Loading...</div>
    </div>
    <div class="col-4">
      <strong>col-4</strong>
      <div class="measurement-info" id="responsive-col-4-info-3">Loading...</div>
    </div>
    <div class="col-1">
      <strong>col-1</strong>
      <div class="measurement-info" id="responsive-col-1-info-1">Loading...</div>
    </div>
    <div class="col-6">
      <strong>col-6</strong>
      <div class="measurement-info" id="responsive-col-6-info-1">Loading...</div>
    </div>
    <div class="col-5">
      <strong>col-5</strong>
      <div class="measurement-info" id="responsive-col-5-info-1">Loading...</div>
    </div>
    <div class="col-2">
      <strong>col-2</strong>
      <div class="measurement-info" id="responsive-col-2-info-1">Loading...</div>
    </div>
    <div class="col-3">
      <strong>col-3</strong>
      <div class="measurement-info" id="responsive-col-3-info-1">Loading...</div>
    </div>
    <div class="col-4">
      <strong>col-4</strong>
      <div class="measurement-info" id="responsive-col-4-info-1">Loading...</div>
    </div>
  </div>
</section>

<section>
  <div class="page-wrapper">
    <h2>Perfect Offset System</h2>
    <p>Use <code>offset-*</code> utilities for systematic pseudo-centering. Offset creates equal padding on both sides using the formula: <code>(n × column + n × gutter) ÷ 2</code></p>
    <div class="code-block">
      <pre>&lt;!-- New systematic offset approach --&gt;
&lt;div class="rack"&gt;
  &lt;div class="offset-1 col-10"&gt;Content spans columns 1-11 with balanced padding&lt;/div&gt;
&lt;/div&gt;

&lt;div class="rack"&gt;
  &lt;div class="offset-1 col-3"&gt;First element&lt;/div&gt;
  &lt;div class="col-8"&gt;Second element - Total: 11 columns centered&lt;/div&gt;
&lt;/div&gt;

&lt;!-- Systematic padding calculation --&gt;
&lt;div class="rack"&gt;
  &lt;div class="offset-3 col-6"&gt;3 columns + gutters worth of padding on each side&lt;/div&gt;
&lt;/div&gt;</pre>
    </div>
  </div>

  <div class="offset-demo">
    <div class="rack">
      <div class="offset-1 col-10">
        <strong>offset-1 col-10</strong>
        <div class="measurement-info">Spans columns 1-11 with 0.5 column padding each side</div>
      </div>
      <div class="offset-2 col-8">
        <strong>offset-2 col-8</strong>
        <div class="measurement-info">Spans columns 1-9 with 1 column + gutter padding each side</div>
      </div>
      <div class="offset-3 col-6">
        <strong>offset-3 col-6</strong>
        <div class="measurement-info">Spans columns 1-7 with 1.5 column + gutter padding each side</div>
      </div>
      <div class="offset-4 col-4">
        <strong>offset-4 col-4</strong>
        <div class="measurement-info">Spans columns 1-5 with 2 column + gutter padding each side</div>
      </div>
      <div class="offset-1 col-3" style="background-color: #dcfce7;">
        <strong>offset-1 col-3</strong>
        <div class="measurement-info">Example test case part 1</div>
      </div>
      <div class="col-8" style="background-color: #fef3c7;">
        <strong>col-8</strong>
        <div class="measurement-info">Example test case part 2 - Total: 11 columns centered</div>
      </div>
    </div>
  </div>
</section>

<div class="page-wrapper">
  <div>
    <h2>Technical Implementation</h2>
    <div class="code-block">
      <h4>Core CSS Structure</h4>
      <pre>@theme {
  --grid-columns: 12;
  --base-gap: 1rem;
  --container-padding: 1.5rem;
}

@utility rack {
  display: grid;
  grid-template-columns: repeat(var(--grid-columns), 1fr);
  gap: var(--base-gap);
}

@utility rail {
  display: flex;
  gap: var(--base-gap);
  overflow-x: auto;
}</pre>
    </div>
  </div>
</div>

<!-- PSP Layout Plugin Integration (includes debug functionality) -->
<script src="/plugins/psp-layout/scripts/debug-mode.js"></script>
<script src="/js/demo.js"></script>